<div class="product-finder-widget">

  <!-- ko if: showModalLink -->
  <a href="javascript:void(0)" data-bind="click: showProductFinder, text: linkText">Product Finder</a>
  <!-- /ko -->

  <div role="dialog" aria-hidden="true" class="product-finder-modal modal fade" data-bind="modal: { show: visible }">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header query-builder-modal-header">Product Finder</div>

        <div class="modal-body">

          <!--  search field -->
          <div class="product-finder-query-builder">
            <div data-bind="queryBuilder: { value: pager.query, displayMode: 'inline', buttonLabel: 'filter', buttonIconClass: 'glyphicon glyphicon-filter'}"></div>
          </div>

          <div class="product-finder-checked-products">

            <div class="product-finder-carousel" data-slick='{"slidesToShow": 7, "slidesToScroll": 1, "variableWidth": true}' data-bind="foreach: { data: currentProducts, as: 'currentProduct' }">
              <!-- ko if: $index() === 0 -->
              <div class="product-finder-carousel-item" data-bind="productInfo: { product: currentProduct, products: $parent.currentlyCheckedValues }"></div>
              <!-- /ko -->
              <!-- ko if: $index() > 0 -->
              <div class="product-finder-carousel-item" data-bind="productInfo: { product: currentProduct, products: $parent.currentlyCheckedValues  }"></div>
              <!-- /ko -->
            </div>
            
          </div>

          <div class="product-finder-results">
            <div data-bind="compose: { model: 'widgets/productFinder/result', activationData: { pager: pager, checked: value, collector: currentlyCheckedValues } }"></div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="gc-btn gc-btn-cancel" data-bind="click: cancelProductFinder" data-dismiss="modal">CANCEL</button>
          <button type="button" class="gc-btn" data-bind="click: useCheckedProducts">APPLY</button>
          <button type="button" class="gc-btn" data-bind="click: useCheckedProductsAndClose">APPLY & CLOSE</button>
        </div>

      </div>
    </div>
  </div>

</div>